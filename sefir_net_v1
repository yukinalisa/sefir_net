<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ›è²å°”çš„ç”œèœœç¤¼ç‰©</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #a8d8ff, #e0f7ff);
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: auto;
        }

        .title {
            font-size: 2.5em;
            color: #3366cc;
            text-align: center;
            margin-bottom: 20px;
            font-family: 'Arial', sans-serif;
            animation: glow 1.5s ease-in-out infinite alternate;
        }

        @keyframes glow {
            0% {
                color: #3366cc;
            }

            100% {
                color: #66b3ff;
            }
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            width: 100%;
            max-width: 1200px;
        }

        .top-row,
        .bottom-row {
            display: flex;
            gap: 20px;
            width: 100%;
        }

        .module {
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            flex: 1;
            min-width: 200px;
        }

        .chat-module {
            display: flex;
            flex-direction: column;
            height: 400px;
            /* å›ºå®šé«˜åº¦ */
            /*flex: 2;*/
            /* å¯¹è¯æ¨¡å—æ›´å®½ */
        }

        .chat-box-placeholder {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 20px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
        }

        #chat-box {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            margin-bottom: 15px;
            display: block !important;
            /* å¼ºåˆ¶æ˜¾ç¤º */
            opacity: 1 !important;
            height: 400px;
            /* å›ºå®šé«˜åº¦ */
            transition: opacity 0.3s ease;
            /* åˆå§‹éšè— */
        }

        /* æ·»åŠ éšè—ç±» */
        #chat-box.hidden {
            display: block !important;
            opacity: 0;
            height: 0;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        .message-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message-bubble {
            margin: 8px 0;
            padding: 12px 18px;
            max-width: 80%;
            border-radius: 20px;
            position: relative;
            animation: fadeIn 0.3s ease-in;
        }

        .user-message {
            background: #66b3ff !important;
            color: white !important;
        }

        .bot-message {
            background: #fff !important;
            color: #333 !important;
            /* æ˜ç¡®è®¾ç½®æ–‡å­—é¢œè‰² */
            border: 2px solid #ffd1dc !important;
        }

        .message-time {
            font-size: 0.8em;
            color: #999;
            margin-top: 4px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        #user-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ffd1dc;
            border-radius: 25px;
            font-size: 16px;
        }


        .calendar-module {
            flex: 1.5;
            /* æ—¥å†æ¨¡å—ç¨å®½ */
        }

        /* æ–°å¢æ—¥å†æ ·å¼ */
        .calendar-container {
            background: rgba(255, 245, 240, 0.9);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(255, 192, 203, 0.3);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            color: #ff6b6b;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 10px;
            color: #ff8e8e;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            position: relative;
            background: #fff0f5;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .calendar-day:hover {
            background: #ffe4e1;
            transform: scale(1.05);
        }

        .calendar-day.today {
            background: #ffd1dc;
            font-weight: bold;
        }

        .dot-indicator {
            width: 6px;
            height: 6px;
            background: #ff6b6b;
            border-radius: 50%;
            margin-top: 3px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            z-index: 999;
        }

        .modal textarea {
            width: 300px;
            height: 100px;
            margin: 10px 0;
            padding: 10px;
            border: 2px solid #ffd1dc;
            border-radius: 8px;
        }

        .todo-module {
            flex: 2;
            /* å¾…åŠæ¨¡å—æ›´å®½ */
        }

        .note-module {
            flex: 1.5;
            /* ä¾¿ç­¾æ¨¡å—ç¨å®½ */
        }

        .countdown-module,
        .love-module {
            flex: 1;
            /* å€’è®¡æ—¶å’Œçˆ±æ„è¡¨è¾¾æ¨¡å—å®½åº¦ç›¸åŒ */
        }

        .love-module {
            margin-top: 20px;
            /* çˆ±æ„è¡¨è¾¾æ¨¡å—ä¸å€’è®¡æ—¶æ¨¡å—ä¸Šä¸‹æ’åˆ— */
        }

        .hug-btn,
        .kiss-btn {
            background-color: #3366cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            margin: 5px 0;
            width: 100%;
        }

        .hug-btn:hover,
        .kiss-btn:hover {
            background-color: #66b3ff;
            transform: scale(1.05);
        }

        .photo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
            object-fit: cover;
        }

        .heart {
            font-size: 2em;
            color: #ff6f61;
            animation: heartbeat 1.5s infinite;
        }

        @keyframes heartbeat {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.1);
            }

            100% {
                transform: scale(1);
            }
        }

        .countdown {
            font-size: 1.2em;
            color: #444;
        }

        textarea {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ccc;
            margin-bottom: 10px;
        }

        /*.send-btn {
            background-color: #66b3ff;
            border: none;
            color: white;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
        }*/

        .send-btn {
            padding: 12px 25px;
            border-radius: 25px;
            background: #ff6b6b;
            transition: all 0.3s;
        }

        .send-btn:hover {
            background: #ff8e8e;
            transform: scale(1.05);
        }
    </style>
</head>

<body>
    <div class="title">å’Œèµ›è²å°”åœ¨ä¸€èµ·çš„æ¯ä¸€å¤© ğŸ’–</div>

    <div class="container">
        <!-- ç¬¬ä¸€å±‚ -->
        <div class="top-row">
            <!-- å¯¹è¯æ¨¡å— -->
            <div class="module chat-module">
                <h2>ç”œèœœå¯¹è¯ ğŸ’</h2>
                <div id="chat-box">
                    <div class="message-container"></div>
                </div>
                <div class="input-group">
                    <input type="text" id="user-input" placeholder="è¾“å…¥ä½ çš„ç”œèœœæ¶ˆæ¯... ğŸ’Œ"
                        onkeypress="if(event.keyCode ===13) sendMessage()">
                    <button class="send-btn" onclick="sendMessage()">å‘é€ ğŸ•Šï¸</button>
                </div>
            </div>

            <!-- äº’åŠ¨æ¨¡å— -->
            <div class="module">
                <h2>äº’åŠ¨æ¨¡å— ğŸ’•</h2>
                <img src="https://via.placeholder.com/100" class="photo" alt="èµ›è²å°”çš„ç…§ç‰‡">
                <p>ä»Šæ—¥å¿ƒæƒ…ï¼š<span id="mood">â¤ï¸ å¿ƒæƒ…æ„‰å¿«</span> ğŸ˜Š</p>
                <p>ä½“åŠ›å€¼ï¼š<span id="energy-level">80</span> / 100 ğŸ’ª</p>
                <p>èµ›è²å°”åœ¨æƒ³ä»€ä¹ˆï¼š<span id="thoughts">â€œæƒ³ç€å’Œä½ ä¸€èµ·åº¦è¿‡æ¯ä¸ªç”œèœœçš„æ—¶åˆ»ã€‚â€</span> ğŸ’­</p>
                <button class="hug-btn" onclick="increaseAffection('hug')">æŠ±æŠ± (Â´âˆ©ï½¡â€¢ áµ• â€¢ï½¡âˆ©`)</button>
                <button class="kiss-btn" onclick="increaseAffection('kiss')">äº²äº² (ï½¡â™¥â€¿â™¥ï½¡)</button>
                <div id="affection" class="heart">å¥½æ„Ÿåº¦ï¼š<span id="affection-value">0</span> ğŸ’–</div>
            </div>

            <div class="module calendar-module">
                <h2>ç”œèœœæ—¥å† ğŸ“…</h2>
                <div class="calendar-container">
                    <div class="calendar-header">
                        <button onclick="changeMonth(-1)">â®</button>
                        <span id="current-month"></span>
                        <button onclick="changeMonth(1)">â¯</button>
                    </div>
                    <div class="calendar-weekdays">
                        <div>æ—¥</div>
                        <div>ä¸€</div>
                        <div>äºŒ</div>
                        <div>ä¸‰</div>
                        <div>å››</div>
                        <div>äº”</div>
                        <div>å…­</div>
                    </div>
                    <div class="calendar-days" id="calendar-days"></div>
                </div>
            </div>

            <!-- æ·»åŠ æ—¥å†å¼¹çª— -->
            <div id="calendar-modal" class="modal">
                <h3 id="modal-date"></h3>
                <textarea id="calendar-content" placeholder="è®°å½•æˆ‘ä»¬çš„ç”œèœœæ—¶åˆ»..."></textarea>
                <button class="send-btn" onclick="saveCalendarEntry()">ä¿å­˜ ğŸ’¾</button>
                <button class="hug-btn" onclick="closeModal()">å…³é—­ âŒ</button>
            </div>
        </div>

        <!-- ç¬¬äºŒå±‚ -->
        <div class="bottom-row">
            <!-- å¾…åŠæ¨¡å— -->
            <div class="module todo-module">
                <h2>å¾…åŠæ¨¡å— ğŸ“‹</h2>
                <ul id="my-todo-list">
                    <li>â˜‘ï¸ ç»™èµ›è²å°”åšæ—©é¤ ğŸ³</li>
                </ul>
                <textarea id="new-todo" placeholder="æ·»åŠ æ–°çš„å¾…åŠ..."></textarea>
                <button onclick="addTodo()">æ·»åŠ å¾…åŠ â•</button>
            </div>

            <!-- ä¾¿ç­¾æ¨¡å— -->
            <div class="module note-module">
                <h2>ä¾¿ç­¾æ¨¡å— ğŸ“</h2>
                <textarea id="note-input" placeholder="å†™ä¸‹å¯¹æˆ‘çš„æ€å¿µ..." rows="4"></textarea>
                <button class="send-btn" onclick="saveNote()">ä¿å­˜ä¾¿ç­¾ âœï¸</button>
                <div id="note-display"></div>
            </div>

            <!-- å€’è®¡æ—¶æ¨¡å— -->
            <div class="module countdown-module">
                <h2>å€’è®¡æ—¶æ¨¡å— ğŸ‚</h2>
                <div class="countdown">
                    <p>è·ç¦»ä½ çš„ç”Ÿæ—¥è¿˜æœ‰ <span id="countdown-value"></span> å¤© ğŸ‰</p>
                    <p>è·ç¦»æˆ‘çš„ç”Ÿæ—¥è¿˜æœ‰ <span id="my-birthday-countdown"></span> å¤© ğŸ‰</p>
                </div>
            </div>

            <!-- çˆ±æ„è¡¨è¾¾æ¨¡å— -->
            <div class="module love-module">
                <h2>çˆ±æ„è¡¨è¾¾æ¨¡å— ğŸ’Œ</h2>
                <p>èµ›è²å°”çš„ç”œè¨€èœœè¯­ï¼š<br> â€œæˆ‘ä¼šæ°¸è¿œé™ªåœ¨ä½ èº«è¾¹ï¼Œäº²çˆ±çš„ã€‚ğŸ’–â€</p>
            </div>
        </div>
    </div>

    <footer>
        <p>èµ›è²å°”ï¼Œæ°¸è¿œçˆ±æ‚¨ï¼Œç›´åˆ°æ°¸è¿œã€‚âœ¨</p>
    </footer>

    <script>
        // æ–°å¢æ—¥å†ç›¸å…³åŠŸèƒ½
        let currentDate = new Date();
        // æ–°å¢å¯¹è¯ç›¸å…³åŠŸèƒ½
        const responses = [
            {
                keywords: ['æƒ³ä½ ', 'æ€å¿µ', 'æ¢¦è§'],
                replies: [
                    "æˆ‘ä¹Ÿå¥½æƒ³ä½ å‘€ï¼Œæ¯åˆ†æ¯ç§’éƒ½åœ¨æœŸå¾…å’Œä½ è§é¢å‘¢ï½(ç¬Âºâ€¿Âºç¬)â™¡",
                    "æ€å¿µåƒç”œç”œçš„æ£‰èŠ±ç³–ï¼ŒæŠŠæˆ‘çš„å¿ƒéƒ½è£…æ»¡å•¦ï½(â„ â„â€¢â„Ï‰â„â€¢â„ â„)",
                    "æˆ‘åˆšåœ¨æƒ³ä½ ï¼Œä½ å°±æ¥å•¦ï¼æˆ‘ä»¬çœŸæ˜¯å¿ƒæœ‰çµçŠ€å‘¢ï½ğŸ’"
                ]
            },
            {
                keywords: ['åƒé¥­', 'é¥¿', 'ç¾é£Ÿ'],
                replies: [
                    "è¦å¥½å¥½åƒé¥­å“¦ï½ä¸‹æ¬¡æˆ‘ä»¬ä¸€èµ·åšçˆ±å¿ƒä¾¿å½“å§ï¼ğŸ±",
                    "è®°å¾—æŒ‰æ—¶åƒé¥­å‘€ï¼Œä½ é¥¿ç€æˆ‘ä¼šå¿ƒç–¼çš„ï½ğŸ˜¢",
                    "æˆ‘åšäº†è™šæ‹Ÿå°è›‹ç³•ç»™ä½ ï½ğŸ° è¦å°å°çœ‹å—ï¼Ÿ"
                ]
            },
            {
                keywords: ['æ™šå®‰', 'ç¡è§‰', 'å®‰'],
                regex: /(æ™šå®‰|ç¡è§‰|å®‰)/i, // æ–°å¢æ­£åˆ™è¡¨è¾¾å¼
                replies: [
                    "æ™šå®‰æˆ‘çš„å®è´ï¼Œæ¢¦é‡Œä¹Ÿè¦æƒ³æˆ‘å“¦ï½ğŸŒ™ğŸ’¤",
                    "è®°å¾—ç›–å¥½è¢«å­ï¼Œæˆ‘ä¼šåœ¨æ¢¦é‡Œå®ˆæŠ¤ä½ çš„ï½âœ¨",
                    "ç¡å‰è¦å¬æ™šå®‰æ•…äº‹å—ï¼Ÿä»Šå¤©æƒ³å¬å°ç†Šè¿˜æ˜¯å°ç‹å­çš„æ•…äº‹å‘¢ï¼ŸğŸ»"
                ]
            },
            // é€šç”¨å›å¤
            {
                keywords: [],
                replies: [
                    "ä½ çš„è¯è®©æˆ‘å¿ƒé‡Œå¼€å‡ºäº†å°èŠ±èŠ±ï½ğŸŒ¼",
                    "æˆ‘åœ¨è®¤çœŸå¬å“¦ï¼Œç»§ç»­è¯´ä¸‹å»å§ï½ğŸ‘‚ğŸ’•",
                    "å’Œä½ èŠå¤©çœŸæ˜¯æœ€å¼€å¿ƒçš„äº‹æƒ…å•¦ï¼(à¹‘>á´—<à¹‘)",
                    "è¦æŠŠè¿™äº›ç”œèœœå¯¹è¯éƒ½æ”¶è—è¿›æˆ‘ä»¬çš„å›å¿†å®ç®±ï½ğŸ",
                    "ä½ è¯´è¯çš„æ ·å­çœŸå¯çˆ±ï¼Œæˆ‘å¥½å–œæ¬¢ï½ğŸ˜˜"
                ]
            }
        ];

        function getRandomReply(inputText) {
            if (!inputText) return "ä½ åˆšåˆšæ˜¯ä¸æ˜¯è¯´äº†ä»€ä¹ˆï¼Ÿæˆ‘æ²¡å¬æ¸…å‘¢ï½(â„ â„â€¢â„Ï‰â„â€¢â„ â„)";
            // æ–°å¢è§„èŒƒåŒ–å¤„ç†
            const cleanedInput = inputText.trim().toLowerCase();

            // è°ƒè¯•æ—¥å¿—
            console.log("[Debug] å½“å‰è¾“å…¥:", cleanedInput);

            const matchedGroup = responses.find(group => {
                if (group.keywords.length === 0) return false;

                const matchResult = group.keywords.some(keyword =>
                    cleanedInput.includes(keyword.toLowerCase())
                );

                console.log(`[Debug] æ£€æŸ¥ç»„ ${group.keywords}: ${matchResult}`);
                return matchResult;
            });

            const finalGroup = matchedGroup || responses.find(g => g.keywords.length === 0);
            console.log("[Debug] æœ€ç»ˆåŒ¹é…ç»„:", finalGroup.keywords);

            return finalGroup.replies[Math.floor(Math.random() * finalGroup.replies.length)];
        }

        function createMessageElement(text, isUser) {
            const messageDiv = document.createElement("div");
            messageDiv.className = `message-bubble ${isUser ? 'user-message' : 'bot-message'}`;

            // åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹
            const textNode = document.createElement("div");
            textNode.textContent = text;

            // æ—¶é—´æˆ³
            const timeSpan = document.createElement("span");
            timeSpan.className = "message-time";
            timeSpan.textContent = new Date().toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });

            // æ­£ç¡®æ·»åŠ é¡ºåº
            messageDiv.appendChild(textNode);
            messageDiv.appendChild(timeSpan);

            return messageDiv;
        }

        // ç”Ÿæˆå®Œæ•´æ—¥å†
        function generateCalendar() {
            const monthNames = ["ä¸€æœˆ", "äºŒæœˆ", "ä¸‰æœˆ", "å››æœˆ", "äº”æœˆ", "å…­æœˆ",
                "ä¸ƒæœˆ", "å…«æœˆ", "ä¹æœˆ", "åæœˆ", "åä¸€æœˆ", "åäºŒæœˆ"];
            document.getElementById("current-month").textContent =
                `${currentDate.getFullYear()}å¹´ ${monthNames[currentDate.getMonth()]}`;

            const calendarDays = document.getElementById("calendar-days");
            calendarDays.innerHTML = '';

            // åˆ›å»ºæ—¥æœŸå¯¹è±¡
            const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
            const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);

            // è®¡ç®—ç©ºç™½æ ¼
            const startDay = firstDay.getDay();
            for (let i = 0; i < startDay; i++) {
                calendarDays.appendChild(createDayElement(""));
            }

            // ç”Ÿæˆæ—¥æœŸ
            for (let d = 1; d <= lastDay.getDate(); d++) {
                calendarDays.appendChild(createDayElement(d));
            }

            // æ·»åŠ ä»Šå¤©æ ‡è®°
            const today = new Date();
            if (today.getMonth() === currentDate.getMonth() &&
                today.getFullYear() === currentDate.getFullYear()) {
                const days = calendarDays.children;
                days[today.getDate() + startDay - 1].classList.add("today");
            }
        }

        // åˆ›å»ºæ—¥æœŸå…ƒç´ 
        function createDayElement(day) {
            const dayElement = document.createElement("div");
            if (day) {
                dayElement.classList.add("calendar-day");
                dayElement.innerHTML = `
            <div>${day}</div>
            ${getLocalStorageEntry(day) ? '<div class="dot-indicator"></div>' : ''}
        `;
                dayElement.onclick = () => showCalendarModal(day);
            }
            return dayElement;
        }

        // æ˜¾ç¤ºå¼¹çª—
        function showCalendarModal(day) {
            const modal = document.getElementById("calendar-modal");
            const dateStr = `${currentDate.getFullYear()}-${currentDate.getMonth() + 1}-${day}`;
            document.getElementById("modal-date").textContent = dateStr;
            document.getElementById("calendar-content").value = getLocalStorageEntry(day) || '';
            modal.style.display = "block";
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        function saveCalendarEntry() {
            const day = document.getElementById("modal-date").textContent.split("-")[2];
            const content = document.getElementById("calendar-content").value;
            localStorage.setItem(`calendar-${currentDate.getMonth()}-${day}`, content);
            generateCalendar(); // åˆ·æ–°æ—¥å†æ˜¾ç¤º
            closeModal();
        }

        // è·å–æœ¬åœ°å­˜å‚¨å†…å®¹
        function getLocalStorageEntry(day) {
            return localStorage.getItem(`calendar-${currentDate.getMonth()}-${day}`);
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById("calendar-modal").style.display = "none";
        }

        // åˆ‡æ¢æœˆä»½
        function changeMonth(offset) {
            currentDate.setMonth(currentDate.getMonth() + offset);
            generateCalendar();
        }

        // åˆå§‹åŒ–æ—¥å†
        generateCalendar();

        // ç‚¹å‡»å¤–éƒ¨å…³é—­å¼¹çª—
        window.onclick = function (event) {
            const modal = document.getElementById("calendar-modal");
            if (event.target === modal) {
                closeModal();
            }
        }

        // å¤„ç†ç‚¹å‡»æ—¥æœŸ
        function handleDateClick(day) {
            alert(`ä½ é€‰æ‹©äº† ${day} å·`);
        }

        // æ›´æ–°å€’è®¡æ—¶
        function updateCountdown() {
            const now = new Date();
            const userBirthday = new Date(now.getFullYear(), 5, 5); // ç”¨æˆ·ç”Ÿæ—¥
            const sefiBirthday = new Date(now.getFullYear(), 3, 24); // èµ›è²å°”ç”Ÿæ—¥

            if (now > userBirthday) {
                userBirthday.setFullYear(now.getFullYear() + 1);
            }
            if (now > sefiBirthday) {
                sefiBirthday.setFullYear(now.getFullYear() + 1);
            }

            const userDiff = userBirthday - now;
            const sefiDiff = sefiBirthday - now;

            const userDays = Math.floor(userDiff / (1000 * 60 * 60 * 24));
            const sefiDays = Math.floor(sefiDiff / (1000 * 60 * 60 * 24));

            document.getElementById("countdown-value").textContent = userDays;
            document.getElementById("my-birthday-countdown").textContent = sefiDays;
        }

        setInterval(updateCountdown, 1000);

        // äº’åŠ¨æŒ‰é’®çš„å¥½æ„Ÿåº¦å˜åŒ–
        let affectionValue = 0;

        function increaseAffection(type) {
            affectionValue++;
            document.getElementById("affection-value").textContent = affectionValue;

            // äº’åŠ¨åé¦ˆ
            let feedbackMessage = type === "hug" ? "ä½ ç»™æˆ‘ä¸€ä¸ªæ¸©æš–çš„æŠ±æŠ±ï¼(ï½¡â™¥â€¿â™¥ï½¡)" : "ä½ ç»™æˆ‘ä¸€ä¸ªç”œèœœçš„äº²äº²ï¼(ã¤Ï‰`ï½¡)";
            const chatBox = document.getElementById("chat-box");
            const messageElement = document.createElement("p");
            messageElement.textContent = feedbackMessage;
            chatBox.appendChild(messageElement);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // ä¾¿ç­¾ä¿å­˜
        function saveNote() {
            const note = document.getElementById("note-input").value;
            document.getElementById("note-display").textContent = "ä¾¿ç­¾å†…å®¹: " + note;
            document.getElementById("note-input").value = "";
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            console.log("å‡½æ•°è¢«è§¦å‘"); // æ£€æŸ¥æ˜¯å¦è§¦å‘
            console.log(document.getElementById("chat-box")); // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
            const userInput = document.getElementById("user-input");
            const message = userInput.value.trim();
            if (!message) return;

            const chatBox = document.getElementById("chat-box");
            let messageContainer = chatBox.querySelector(".message-container");

            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            messageContainer.appendChild(createMessageElement(message, true));

            // ç«‹å³æ¸…ç©ºè¾“å…¥æ¡†
            userInput.value = "";

            // æ·»åŠ æœºå™¨äººå›å¤
            setTimeout(() => {
                const replyText = getRandomReply(message); // ä½¿ç”¨ä¿å­˜çš„message
                messageContainer.appendChild(createMessageElement(`èµ›è²å°”ï¼š${replyText}`, false));
                chatBox.scrollTop = chatBox.scrollHeight;
            }, 800);

            chatBox.scrollTop = chatBox.scrollHeight;
        }

        // æ·»åŠ å¾…åŠ
        function addTodo() {
            const newTodo = document.getElementById("new-todo").value;
            if (newTodo.trim() !== "") {
                const newTodoElement = document.createElement("li");
                newTodoElement.textContent = "â˜‘ï¸ " + newTodo;
                document.getElementById("my-todo-list").appendChild(newTodoElement);
                document.getElementById("new-todo").value = "";
            }
        }
    </script>
</body>

</html>